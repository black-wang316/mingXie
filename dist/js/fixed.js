"use strict";$(".fixed").load("./fixed.html",function(){$(".fixL>ul>li").hover(function(){$(this).find(".fixLTitle").finish(),$(this).find(".fixLTitle").css("display","block").animate({right:"37px"},500)},function(){$(this).find(".fixLTitle").finish(),$(this).find(".fixLTitle").css("display","none").animate({right:"47px"},500)});for(var i=document.getElementsByClassName("fixLBtn"),t=function(n){i[n].onclick=function(){if("-229px"==$(".fixed").css("right"))$(".fixed").animate({right:"0px"},800);else if("visible"==$(".fixR".concat(n+1)).css("visibility"))$(".fixed").animate({right:"-229px"},800);else{for(var t=0;t<i.length;t++)$(".fixR".concat(t+1)).css("visibility","hidden"),i[t].style.background="#000";$(".fixR".concat(n+1)).css("visibility","visible"),i[n].style.background="#BD0000"}}},n=0;n<i.length;n++)t(n);function c(){new Promise(function(i){$.ajax({type:"post",url:"../api/cart.php",data:{uname2:$.cookie("uName")},success:function(t){var n=JSON.parse(t);console.log(n),i(n)}})}).then(function(t){$(".gwList").html(t.map(function(t){return' <li class="minList" data-id="'.concat(t.id,'">\n                    <div>\n                        <img src="').concat(t.color,'" alt="">\n                    </div>\n                    <div>\n                        <p title="').concat(t.title,'">\n                            ').concat(t.title).concat(t.size,'</p>\n                        <span class="gwPrice">￥').concat(t.price,'</span>\n                        <span class="gwNum">\n                                    <span class="down">-</span>\n                                    <span class="num" data-total="').concat(t.total,'">x').concat(t.num,'</span>\n                                    <span class="up">+</span>\n                                    <span class="del">删除</span>\n                                </span>\n                    </div>\n                </li>')}).join(""));var n=[],i=[],a=0,e=0;$(".num").each(function(){n.push($(this).html().slice(1)),i.push($(this).attr("data-total"))}),a=1<n.length?n.reduce(function(t,n){return Number(t)+Number(n)}):Number(n[0]),e=1<i.length?i.reduce(function(t,n){return Number(t)+Number(n)}):Number(i[0]),$(".totalNum").html(a),$(".totalPrice").html("￥".concat(e.toFixed(2))),$(".minList").on("click",".down",function(){$.ajax({type:"post",url:"../api/cart.php",data:{type:"down",id:$(this).parent().parent().parent().attr("data-id"),price:$(this).parent().prev().text().slice(1)},success:function(){c()}})}).on("click",".up",function(){console.log(2),$.ajax({type:"post",url:"../api/cart.php",data:{type:"up",id:$(this).parent().parent().parent().attr("data-id"),price:$(this).parent().prev().text().slice(1)},success:function(){c()}})}).on("click",".del",function(){console.log(3),$.ajax({type:"post",url:"../api/cart.php",data:{type:"del",id:$(this).parent().parent().parent().attr("data-id")},success:function(){c()}})})})}returnTop(".retTop",0,10),$(".fixL").on("click",".goCart",function(){c(),"null"==$.cookie("uName")&&layui.use("layer",function(){layui.layer.open({title:"噔噔蹬，登录后才能进入购物车",content:"是否跳转到登录页面",btn:["给我跳","告辞"],btn1:function(){location.href="login.html"},closeBtn:2,anim:4})})}),$.cookie("uName")&&c()});