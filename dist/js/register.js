"use strict";!function(){$("header").load("../html/headWithoutSearch.html"),$("footer").load("../html/foot.html"),$("#regcode~p").hide().html(function(){$(this).html(randomCode()),$(this).css({color:randomColor(16),background:'url("../img/ranCode'.concat(parseInt(3*Math.random()+1),'")')})}).on("click",function(){$(this).html(randomCode()),$(this).css({color:randomColor(16),background:'url("../img/ranCode'.concat(parseInt(3*Math.random()+1),'")')})}),$("#regcode").on("focus",function(){$("#regcode~p").show()});for(var i=0;i<$(".regLeft input").size();i++)$(".regLeft input").eq(i).attr("data-id",i);var e=[];$("#name").on("blur",function(){/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/.test($(this).val().trim())||/^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/.test($(this).val().trim())?($(".regTitle").css("visibility","hidden"),$.ajax({type:"post",url:"../api/loginRegister.php",data:{type:"register",username:$(this).val().trim()},success:function(i){var t=JSON.parse(i);t.status?($(".regTitle").css("visibility","visible").addClass("success").html(t.msg),e[$("#name").data("id")]=1):($(".regTitle").css("visibility","visible").removeClass("success").html(t.msg),e[$("#name").data("id")]=0)}})):($(".regTitle").css("visibility","visible").removeClass("success").html("请输入正确的邮箱账号或手机!"),e[$("#name").data("id")]=0)}),$("#psw").on("blur",function(){/^.{4,}$/.test($(this).val().trim())?($(".regTitle").css("visibility","hidden"),$(this).val().trim()==$("#rpsw").val().trim()?e[$("#psw").data("id")]=1:e[$("#psw").data("id")]=0):($(".regTitle").css("visibility","visible").removeClass("success").html("输入的密码长度不能少于4个字符"),e[$("#psw").data("id")]=0)}),$("#rpsw").on("blur",function(){$(this).val().trim()==$("#psw").val().trim()?($(".regTitle").css("visibility","hidden"),e[$("#rpsw").data("id")]=1,e[$("#psw").data("id")]=1):($(".regTitle").css("visibility","visible").removeClass("success").html("您两次输入的密码不一致"),e[$("#rpsw").data("id")]=0)}),$("#regcode").on("blur",function(){$(this).val().trim().toLowerCase()==$(this).next().html().toLowerCase()?($(".regTitle").css("visibility","hidden"),e[$("#regcode").data("id")]=1):($(".regTitle").css("visibility","visible").removeClass("success").html("验证码输入不正确"),e[$("#regcode").data("id")]=0)}),$(".regBtn").on("click",function(){if($("#check")[0].checked){e[$("#check").data("id")]=1;for(var i=0,t=0,s=e;t<s.length;t++){i+=s[t]}i==e.length?$.ajax({type:"post",url:"../api/loginRegister.php",data:{type:"register",username:$("#name").val().trim(),password:$("#psw").val().trim()},success:function(i){JSON.parse(i);$.cookie("uName",$("#name").val().trim()),layui.use("layer",function(){layui.layer.open({title:"汝跳否？",content:"是否跳转到登录页面",btn:["给我跳","告辞"],btn1:function(){location.href="login.html"},closeBtn:2,anim:4})})}}):alert("注册失败")}else e[$("#check").data("id")]=0,$(".regTitle").css("visibility","visible").removeClass("success").html("同意协议才能注册")})}();