"use strict";$("header").load("headWithoutSearch.html"),$("footer").load("foot.html"),function e(){new Promise(function(a){$.ajax({type:"post",url:"../api/cart.php",data:{uname2:$.cookie("uName")},success:function(t){var n=JSON.parse(t);a(n)}})}).then(function(t){console.log(t),$(".list").html(t.map(function(t){return'<ul class="minList" data-id="'.concat(t.id,'">\n                            <li>\n                                <figure>\n                                    <img src="').concat(t.color,'" alt="">\n                                    <figcaption>\n                                        <a href="###">').concat(t.title,"</a>\n                                        <p>( 尺码:").concat(t.size,")</p>\n                                    </figcaption>\n                                </figure>\n                            </li>\n                            <li>￥").concat(t.price,'</li>\n                            <li>\n                                <p class="down">-</p>\n                                <input type="text" value="').concat(t.num,'" class="num">\n                                <p class="up">+</p>\n                            </li>\n                            <li>\n                                -').concat((t.price*t.num*1.2-t.total).toFixed(2),'\n                            </li>\n                            <li class="totals">￥').concat(t.total,'</li>\n                            <li>\n                                <span class="del">删除</span>\n                            </li>\n                        </ul>')}).join(""));var n=[],a=[],i=0,c=0;$(".num").each(function(){n.push($(this).val())}),$(".totals").each(function(){a.push($(this).text().slice(1))}),i=1<n.length?n.reduce(function(t,n){return Number(t)+Number(n)}):Number(n[0]),c=1<a.length?a.reduce(function(t,n){return Number(t)+Number(n)}):(console.log(a),Number(a[0])),$(".totalNum").find("span").html(i),$(".totalPrice").find("span").html("￥".concat(c.toFixed(2))),$(".minList").on("click",".down",function(){$.ajax({type:"post",url:"../api/cart.php",data:{type:"down",id:$(this).parent().parent().attr("data-id"),price:$(this).parent().prev().text().slice(1)},success:function(){e()}})}).on("click",".up",function(){$.ajax({type:"post",url:"../api/cart.php",data:{type:"up",id:$(this).parent().parent().attr("data-id"),price:$(this).parent().prev().text().slice(1)},success:function(){e()}})}).on("click",".del",function(){$.ajax({type:"post",url:"../api/cart.php",data:{type:"del",id:$(this).parent().parent().attr("data-id")},success:function(){e()}})}).on("blur",".num",function(){$.ajax({type:"post",url:"../api/cart.php",data:{type:"blur",id:$(this).parent().parent().attr("data-id"),price:$(this).parent().prev().text().slice(1),numInp:$(this).val().trim()},success:function(){e()}})})})}(),$(".retShop").on("click",function(){location.href=$.cookie("urlNow")});