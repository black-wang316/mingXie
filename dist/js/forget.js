"use strict";!function(){$("header").load("../html/headWithoutSearch.html"),$("footer").load("../html/foot.html");var s=!1;$("#psw").on("blur",function(){s=/^.{4,}$/.test($(this).val().trim())?($(".loginTitle").css("visibility","hidden"),!0):($(".loginTitle").css("visibility","visible").removeClass("success").html("输入的密码长度不能少于4个字符"),!1)}),function n(){$(".send").html("发送手机验证码").on("click",function(){var l=this;$("#name").val().trim()&&new Promise(function(e){$.ajax({type:"post",url:"../api/loginRegister.php",data:{type:"register",username:$("#name").val().trim()},success:function(t){var i=JSON.parse(t);e(i)}})}).then(function(t){if(t.status)$(".loginTitle").html("该账号未被注册").css("visibility","visible");else{$.ajax({type:"post",url:"../api/forget.php",data:{mobile:$("#name").val().trim()},success:function(t){$(".loginBtn").on("click",function(){$("#code").val().trim()&&s?$("#code").val().trim()==t&&$.ajax({type:"post",url:"../api/reset.php",data:{username:$("#name").val().trim(),password:$("#psw").val().trim()},success:function(t){t&&layui.use("layer",function(){layui.layer.open({title:"已成功修改，汝跳否",content:"是否跳转到登录页面",btn:["给我跳","告辞"],btn1:function(){location.href="login.html"},closeBtn:2,anim:4})})}}):$(".loginTitle").html("按要求填写").css("visibility","visible")})}}),$(".send").off("click");var i=60,e=setInterval(function(){i--,$(l).html(i),i<=0&&(clearInterval(e),n())},1e3)}})})}()}();