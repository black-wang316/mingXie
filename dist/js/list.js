"use strict";function FenYe(t,i){this.list=$(t),this.nums=i,this.types="",this.orders=""}FenYe.prototype={constructor:FenYe,init:function(){this.xuanRang(1)},xuanRang:function(n){var e=this;$.ajax({type:"get",url:"../api/list.php",data:{page:n,num:this.nums,type:this.types,order:this.orders,value:this.values},success:function(t){var i=JSON.parse(t);0==i.total?(e.list.html("没有找到符合的商品"),$("#fenYeBtn").css("display","none")):(e.list.html(i.content.map(function(t){for(var i="",n=0;n<JSON.parse(t.imgsrc).length;n++)i+='<img src="'.concat(JSON.parse(t.imgsrc)[n][0],'" alt="" class="small">');return'<li title="'.concat(t.title,'" data-id="').concat(t.id,'">\n                                    <article class="listImg">\n                                        <img src="').concat(JSON.parse(t.imgsrc)[0][0],'" alt="" class="big">\n                                        <article class="smallImg">\n                                            ').concat(i,'\n                                        </article>\n                                    </article>\n                                    <article class="listDetails">\n                                        <article>\n                                            <span>￥').concat(t.price,"</span>\n                                            <del>￥").concat((1.2*t.price).toFixed(2),"</del>\n                                        </article>\n                                        <article>\n                                            ").concat(t.title,"\n                                        </article>\n                                        <article>\n                                            已售出<strong>").concat(t.sell,"</strong>件\n                                        </article>\n                                        <article>\n                                            尺码：").concat(t.size,"\n                                        </article>\n                                    </article>\n                                </li>")}).join("")),$(".spList li").hover(function(){$(this).finish().animate({backgroundColor:"#eee"},500).find(".listDetails").finish().animate({height:"80px",backgroundColor:"#eee"},500)},function(){$(this).finish().animate({backgroundColor:"#fff"},500).find(".listDetails").finish().animate({height:"60px",backgroundColor:"#fff"},500)}),$(".spList").on("click","li",function(){console.log($(this)),$.cookie("dataId",$(this).attr("data-id").trim()),window.open("details.html")}),$("#fenYeBtn").css("display","block"),layui.use("laypage",function(){layui.laypage.render({elem:"fenYeBtn",count:i.total,limit:8,groups:3,curr:n,jump:function(t,i){i||fenYe.xuanRang(t.curr)}})})),$(".titleL").html("您当前的位置：".concat(e.values)),$(".total").html(i.total)}})},paiXu:function(t,i){this.types=t,this.orders=i,this.init()},search:function(t){this.values=t,this.init()}};var fenYe=new FenYe(".spList",8),kw=$.cookie("kw");function list(t){fenYe.search(t)}fenYe.search(kw),$(".titleL").html("您当前的位置：".concat(kw)),$("footer").load("../html/foot.html");var price=!0,sell=!0;$(".paiXu").on("click",".price",function(){$(".sell,.default").css({background:"#ccc",color:"#666"}).find("use").attr("xlink:href","#icon-arrow-left-copy2"),price?($(this).css({background:"#ff9900",color:"#fff"}).find("use").attr("xlink:href","#icon-arrow-left-copy2"),fenYe.paiXu("price","desc")):($(this).css({background:"#ff9900",color:"#fff"}).find("use").attr("xlink:href","#icon-jiantouarrow486"),fenYe.paiXu("price","asc")),price=!price}).on("click",".sell",function(){$(".price,.default").css({background:"#ccc",color:"#666"}).find("use").attr("xlink:href","#icon-arrow-left-copy2"),sell?($(this).css({background:"#ff9900",color:"#fff"}).find("use").attr("xlink:href","#icon-arrow-left-copy2"),fenYe.paiXu("sell","desc")):($(this).css({background:"#ff9900",color:"#fff"}).find("use").attr("xlink:href","#icon-jiantouarrow486"),fenYe.paiXu("sell","asc")),sell=!sell}).on("click",".default",function(){$(".price,.sell").css({background:"#ccc",color:"#666"}).find("use").attr("xlink:href","#icon-arrow-left-copy2"),$(this).css({background:"#ff9900",color:"#fff"}),fenYe.paiXu("","")}),$(".spList").on("mouseenter",".small",function(){$(this).parent().prev().attr("src","".concat($(this).attr("src")))});